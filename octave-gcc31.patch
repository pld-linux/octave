--- octave-2.1.36/src/c-file-ptr-stream.h.blah	Thu May 23 19:34:39 2002
+++ octave-2.1.36/src/c-file-ptr-stream.h	Thu May 23 19:34:49 2002
@@ -30,9 +30,16 @@
 #include <iostream>
 #include <fstream>
 #include <cstdio>
+#if defined __GNUC__ && (__GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 1))
+#include <ext/stdio_filebuf.h>
+#endif
 
 class
+#if defined __GNUC__ && (__GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 1))
+c_file_ptr_buf : public __gnu_cxx::stdio_filebuf<char>
+#else
 c_file_ptr_buf : public std::filebuf
+#endif
 {
 public:
 
@@ -47,7 +54,11 @@
   c_file_ptr_buf (FILE *f_arg, close_fcn cf_arg = ::fclose)
     : 
 #if defined __GNUC__ && __GNUC__ >= 3
+# if __GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 1)
+    __gnu_cxx::stdio_filebuf<char> (f_arg, std::ios::in | std::ios::out),
+# else
     std::filebuf (f_arg, std::ios::in | std::ios::out),
+#endif
 #else
     std::filebuf (f_arg ? fileno (f_arg) : -1),
 #endif
